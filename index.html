<!DOCTYPE html>
<html>
<head>
    <title>SPACE TYCOON: ISOMETRIC</title>
    <style>
        :root { --neon: #00f2ff; --money: #00ff88; --glass: rgba(10, 25, 40, 0.9); }
        body { margin: 0; overflow: hidden; background: #00050a; font-family: 'Orbitron', sans-serif; color: white; }
        
        #hud { 
            position: absolute; top: 30px; left: 30px; 
            padding: 20px; background: var(--glass); 
            border: 2px solid var(--neon); box-shadow: 0 0 20px rgba(0,242,255,0.2);
        }
        #money-val { font-size: 32px; font-weight: 900; color: var(--money); }
        
        .label {
            position: absolute; text-align: center; pointer-events: none;
            color: var(--neon); font-size: 12px; font-weight: bold;
            background: rgba(0,0,0,0.8); padding: 5px 10px; border: 1px solid var(--neon);
            transform: translate(-50%, -100%);
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&display=swap" rel="stylesheet">
</head>
<body>

    <div id="hud">
        <div style="font-size: 10px; opacity: 0.6; letter-spacing: 2px;">COLONY FUNDS</div>
        <span id="money-val">§ 500</span>
        <div id="income" style="color: var(--neon); font-size: 11px; margin-top: 5px;">+§0/SEC</div>
    </div>

    <div id="labels"></div>

    <script type="importmap">
        { "imports": { "three": "https://unpkg.com/three@0.160.0/build/three.module.js" } }
    </script>

    <script type="module">
        import * as THREE from 'three';

        // --- SCENE & ISOMETRIC CAMERA ---
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x020408);
        
        const aspect = window.innerWidth / window.innerHeight;
        const d = 30;
        const camera = new THREE.OrthographicCamera(-d * aspect, d * aspect, d, -d, 1, 1000);
        camera.position.set(40, 40, 40); // Diagonal "Isometric" View
        camera.lookAt(0, 0, 0);

        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        // --- LIGHTING ---
        const sun = new THREE.DirectionalLight(0xffffff, 2);
        sun.position.set(20, 50, 10);
        scene.add(sun);
        scene.add(new THREE.AmbientLight(0x4060ff, 0.4));

        // --- THE STATION FLOOR ---
        const floorGeo = new THREE.BoxGeometry(100, 1, 100);
        const floorMat = new THREE.MeshStandardMaterial({color: 0x1a1c22});
        const floor = new THREE.Mesh(floorGeo, floorMat);
        floor.position.y = -0.5;
        scene.add(floor);

        const grid = new THREE.GridHelper(100, 20, 0x00f2ff, 0x222222);
        scene.add(grid);

        // --- CUSTOM AVATAR (FROM IMAGE) ---
        const player = new THREE.Group();
        const pBody = new THREE.Mesh(new THREE.CapsuleGeometry(0.4, 1), new THREE.MeshStandardMaterial({color: 0xffffff}));
        pBody.position.y = 0.8;
        const pHair = new THREE.Mesh(new THREE.SphereGeometry(0.35), new THREE.MeshStandardMaterial({color: 0xe6be8a}));
        pHair.position.y = 1.6;
        const pStreak = new THREE.Mesh(new THREE.BoxGeometry(0.1, 0.4, 0.2), new THREE.MeshStandardMaterial({color: 0xff00ff}));
        pStreak.position.set(0.2, 1.7, 0.1);
        player.add(pBody, pHair, pStreak);
        scene.add(player);

        // --- GAME STATE ---
        let money = 500, income = 0;
        const keys = {}, pads = [];

        function createPad(x, z, cost, name, onBuy) {
            const group = new THREE.Group();
            const ring = new THREE.Mesh(new THREE.PlaneGeometry(6, 6), new THREE.MeshBasicMaterial({color: 0x00f2ff, transparent: true, opacity: 0.2, side: THREE.DoubleSide}));
            ring.rotation.x = -Math.PI/2;
            group.add(ring);
            group.position.set(x, 0.05, z);
            
            const div = document.createElement('div');
            div.className = 'label';
            div.innerHTML = `${name}<br>§${cost}`;
            document.getElementById('labels').appendChild(div);

            group.userData = { cost, onBuy, div, active: true };
            scene.add(group);
            pads.push(group);
        }

        // --- BUILDINGS (MATCHING YOUR IMAGES) ---
        
        // 1. Hydroponic Garden (The Green Image)
        createPad(15, 15, 500, "HYDROPONIC GARDEN", () => {
            income += 50;
            const gardenBase = new THREE.Mesh(new THREE.CylinderGeometry(6, 7, 1), new THREE.MeshStandardMaterial({color: 0x88aa00}));
            gardenBase.position.set(15, 0.5, 15);
            scene.add(gardenBase);
            // Spawn Tree
            const trunk = new THREE.Mesh(new THREE.CylinderGeometry(0.3, 0.4, 4), new THREE.MeshStandardMaterial({color: 0x442200}));
            trunk.position.set(15, 2.5, 15);
            const leaves = new THREE.Mesh(new THREE.SphereGeometry(2), new THREE.MeshStandardMaterial({color: 0x00aa44}));
            leaves.position.set(15, 5, 15);
            scene.add(trunk, leaves);

            // Unlock next
            createPad(-15, 15, 2000, "REACTOR CORE", () => {
                income += 250;
                // Reactor (The Machinery Image)
                const core = new THREE.Mesh(new THREE.BoxGeometry(8, 12, 8), new THREE.MeshStandardMaterial({color: 0x333333}));
                core.position.set(-15, 6, 15);
                const glow = new THREE.Mesh(new THREE.CylinderGeometry(2, 2, 10), new THREE.MeshBasicMaterial({color: 0x00f2ff, wireframe: true}));
                glow.position.set(-15, 6, 15);
                scene.add(core, glow);
            });
        });

        // --- LOOP ---
        window.addEventListener('keydown', e => keys[e.code] = true);
        window.addEventListener('keyup', e => keys[e.code] = false);

        function animate() {
            requestAnimationFrame(animate);
            
            const speed = 0.3;
            if(keys['KeyW']) { player.position.x -= speed; player.position.z -= speed; player.rotation.y = Math.PI * 0.75; }
            if(keys['KeyS']) { player.position.x += speed; player.position.z += speed; player.rotation.y = -Math.PI * 0.25; }
            if(keys['KeyA']) { player.position.x -= speed; player.position.z += speed; player.rotation.y = Math.PI * 1.25; }
            if(keys['KeyD']) { player.position.x += speed; player.position.z -= speed; player.rotation.y = Math.PI * 0.25; }

            money += income/60;
            document.getElementById('money-val').innerText = "§ " + Math.floor(money);
            document.getElementById('income').innerText = `+§${income}/SEC`;

            pads.forEach(p => {
                if(!p.userData.active) return;
                const v = p.position.clone().add(new THREE.Vector3(0,2,0)).project(camera);
                p.userData.div.style.left = (v.x * 0.5 + 0.5) * window.innerWidth + 'px';
                p.userData.div.style.top = (-v.y * 0.5 + 0.5) * window.innerHeight + 'px';
                if(player.position.distanceTo(p.position) < 4 && money >= p.userData.cost) {
                    money -= p.userData.cost; p.userData.active = false; p.userData.div.remove(); p.userData.onBuy();
                }
            });

            // Camera follows player smoothly
            const offset = new THREE.Vector3(40, 40, 40);
            camera.position.lerp(player.position.clone().add(offset), 0.1);
            renderer.render(scene, camera);
        }
        animate();
    </script>
</body>
</html>
